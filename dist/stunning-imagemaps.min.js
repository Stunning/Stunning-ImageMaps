!function(t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():window.stunningImageMaps=t()}(function(){"use strict";var t="http://www.w3.org/2000/svg",e="http://www.w3.org/2000/xmlns/",r=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,n={inlineStyle:!0,useImageParentAsWrap:!1,classNames:{prefix:"imgmap__",wrap:"wrap",wrapIndividual:"wrap--%",svg:"svg",svgIndividual:"svg--%",area:"area",areaIndividual:"area--%"},onClick:function(t){}},a=function(t){"object"==typeof t&&(n=g(n,t))},i=function(t){r&&(t?t.tagName&&(t=[t]):t=s(),t.forEach(function(t){var e=l(t);e!==!1&&(e.wrap=n.useImageParentAsWrap?e.img.parentElement:u(e.img),e.svg=o(e),e.map.parentElement.removeChild(e.map))}))},s=function(){var t=document.querySelectorAll("img[usemap]");if(!t.forEach){for(var e=[],r=0;r<t.length;r++)e.push(t[r]);t=e}return t},l=function(t){var e={wrap:null,img:null,map:null,areas:null,svg:null};if(!t.tagName)return!1;switch(t.tagName.toLowerCase()){case"map":if(e.map=t,!t.getAttribute("name"))return!1;if(e.img=document.querySelector('img[usemap="#'+t.getAttribute("name")+'"]'),!e.img.tagName)return!1;break;case"img":if(e.img=t,!t.getAttribute("usemap"))return!1;if(e.map=document.querySelector('map[name="'+t.getAttribute("usemap").substr(1)+'"]'),!e.map.tagName)return!1}n.inlineStyle&&(e.img.style.verticalAlign="top"),e.areas=[];var r=e.map.getElementsByTagName("area");if(r.length)for(var a=0;a<r.length;a++)e.areas.push(r[a]);return e},u=function(t){var e=document.createElement("div");return n.inlineStyle&&(e.style.position="relative"),n.classNames&&e.setAttribute("class",p("wrap",t.getAttribute("usemap").substr(1))),t.parentElement.insertBefore(e,t),e.appendChild(t),e},o=function(r){var a=document.createElementNS(t,"svg");a.setAttributeNS(e,"xmlns:xlink","http://www.w3.org/1999/xlink"),n.classNames&&a.setAttribute("class",p("svg",r.img.getAttribute("usemap").substr(1)));var i=new Image;return i.onload=function(){a.setAttribute("viewBox","0 0 "+this.width+" "+this.height),a.setAttribute("width",this.width),a.setAttribute("height",this.height)},i.src=r.img.src,n.inlineStyle&&(a.style.position="absolute",a.style.top=0,a.style.left=0,a.style.width="100%",a.style.height="100%"),r.areas.forEach(function(t){var e=c(t);e!==!1&&a.appendChild(e)}),r.wrap.appendChild(a),a},c=function(e){var r=null,a=e.getAttribute("coords");switch(e.getAttribute("shape").toLowerCase()){case"rect":a=a.split(","),r=document.createElementNS(t,"rect"),r.setAttributeNS(null,"x",a[0]),r.setAttributeNS(null,"y",a[1]),r.setAttributeNS(null,"width",a[2]-a[0]),r.setAttributeNS(null,"height",a[3]-a[1]);break;case"circle":a=a.split(","),r=document.createElementNS(t,"circle"),r.setAttributeNS(null,"cx",a[0]),r.setAttributeNS(null,"cy",a[1]),r.setAttributeNS(null,"r",a[2]);break;case"poly":a=a.replace(/(\d{1,},\d{1,})(?:,)/g,"$1 "),r=document.createElementNS(t,"polygon"),r.setAttributeNS(null,"points",a)}return null===r?!1:(r.setAttributeNS(null,"fill","#000000"),r.setAttributeNS(null,"stroke","none"),r.setAttributeNS(null,"data-href",e.getAttribute("href")),r.setAttributeNS(null,"class",p("area",e.parentElement.getAttribute("name"))),n.inlineStyle&&(r.style.cursor="pointer"),r.onclick=m,r)},m=function(t){var e=this.getAttribute("data-href");return"function"==typeof n.onClick&&n.onClick.call(this,t),"#"===e.substr(1)?void(window.location.hash=e):void(window.location.href=e)},p=function(t,e){var r=n.classNames.prefix||"";return r+=n.classNames[t],n.classNames[t+"Individual"]&&(r+=" "+(n.classNames.prefix||""),r+=n.classNames[t+"Individual"].replace("%",e)),r},g=function(t,e){for(var r in e)t.hasOwnProperty(r)&&("object"==typeof e[r]?(t[r]=t[r]||{},t[r]=g(t[r],e[r])):t[r]=e[r]);return t};return{setup:a,toSVG:i}});